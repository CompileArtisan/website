---
import MainLayout from '../layouts/MainLayout.astro';
import Keybindings from '../components/Keybindings.astro'
import HomePage from '../components/HomePage';
import { getCollection } from 'astro:content';
import { marked } from 'marked';

const homeSections = (await getCollection('home')).sort((a, b) => 
  a.data.order - b.data.order
);

const sections = homeSections.map((section) => ({
  label: section.data.label,
  title: section.data.title,
  content: marked.parse(section.body),
  order: section.data.order,
}));
---

<MainLayout title="CompileArtisan">
    <div class="main-content">
      <div class="left-panel scroller-container">
        <HomePage client:only="react" sections={sections} />
      </div>
        <div class="right-panel" id="description-panel">
          <div class="right-panel-top">
          <p>This is my Personal Website, inspired by the good old
            <a
            href="https://docs.oracle.com/cd/E20881_01/html/E20891/figures/mb1.png"
            class="right-panel-link">
              BIOS interface
            </a>
          </p>
            <div class="tip">
              <p>You can use your arrow keys to move around, just like it's your BIOS.</p>
            </div>
          </div>
          <Keybindings />
        </div>
    </div>
</MainLayout>
